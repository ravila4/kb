{"pageProps":{"note":{"id":"8d8amtcalpu27ltha1q3c2i","title":"Higher-Order Functions","desc":"Decorators, Partial Functions and Variable Arguments","updated":1667850488705,"created":1667842245182,"custom":{},"fname":"python.higher_order_functions","type":"note","vault":{"fsPath":"vault","remote":{"type":"git","url":"git@github.com:ravila4/knowledgebase.git"}},"contentHash":"1d3ee906a42c325262df00ae1f73bca7","links":[],"anchors":{"higher-order-functions-and-decorators":{"type":"header","text":"Higher-order functions and decorators","value":"higher-order-functions-and-decorators","line":14,"column":0,"depth":2},"partial-functions":{"type":"header","text":"Partial functions","value":"partial-functions","line":86,"column":0,"depth":2},"variable-arguments":{"type":"header","text":"Variable arguments","value":"variable-arguments","line":134,"column":0,"depth":2}},"children":[],"parent":"mnoouhphnmr5mdj6is5oaz6","data":{}},"body":"<h1 id=\"higher-order-functions\">Higher-Order Functions<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#higher-order-functions\"></a></h1>\n<p>Higher-order functions are functions that take other functions as input and return functions as output.</p>\n<p>Some examples of built-in higher-order function in Python include:  <code>map()</code>, <code>filter()</code>, and <code>reduce()</code>.</p>\n<p>The <code>functools</code> module in Python also provides built-in higher-order functions and operations for working with them.</p>\n<h2 id=\"higher-order-functions-and-decorators\">Higher-order functions and decorators<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#higher-order-functions-and-decorators\"></a></h2>\n<p>Decorators are a type of higher-order function that extends the functionality of a given function.</p>\n<p>Let's start with a simple decorator example. In this simplest case let's decorate a function that takes no arguments:</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># This is a regular function</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello world\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># This is a decorator function:</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">goodbye</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">inner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        func<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"Goodbye world!\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> inner\n</code></pre>\n<p>The common pattern of decorator functions is that they contain an inner and an outer function. The job ouf the outer function is simply to return the inner function. The inner function calls and extends the input function.</p>\n<p>When we pass the <code>hello</code> function to the <code>goodbye</code> function, we get a new function:</p>\n<pre class=\"language-python\"><code class=\"language-python\">hello_goodbye <span class=\"token operator\">=</span> goodbye<span class=\"token punctuation\">(</span>hello<span class=\"token punctuation\">)</span>\nhello_goodbye<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> Hello world\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> Goodbye world!\n</code></pre>\n<p>The next step up in terms of complexity is adding arguments to the inner function:</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">greet</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"Hello, </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span></span><span class=\"token string\">!\"</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">decorate</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">inner</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        func<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"It's nice to meet you!\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> inner\n\ndecorate<span class=\"token punctuation\">(</span>greet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Ricardo\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> Hello<span class=\"token punctuation\">,</span> Ricardo!\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> It's nice to meet you!\n</code></pre>\n<p>That's not too hard! Notice that the syntax <code>decorate(greet)(\"Ricardo\")</code> sends the string \"Ricardo\" to the inner function of the <code>decorate</code> function.</p>\n<p>Finally we can add some syntactic sugar to our decorators by using Python's <code>@</code> operator. In this case, if we wanted to decorate the function <code>greet</code> above, we could write it like this:</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">goodbye</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">inner</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        func<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"Goodbye, </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> inner\n\n<span class=\"token decorator annotation punctuation\">@goodbye</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">greet</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"Hello, </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span></span><span class=\"token string\">!\"</span></span><span class=\"token punctuation\">)</span>\n\ngreet<span class=\"token punctuation\">(</span><span class=\"token string\">\"Ricardo\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> Hello<span class=\"token punctuation\">,</span> Ricardo!\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> Goodbye<span class=\"token punctuation\">,</span> Ricardo\n</code></pre>\n<p>As you can see, <code>@goodbye</code> essentially modifies the function to return the output of <code>goodbye(greet)</code>.</p>\n<p>That is basically all there is to know about decorators!</p>\n<h2 id=\"partial-functions\">Partial functions<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#partial-functions\"></a></h2>\n<p>Partial functions are a type of higher-order function that extends functions by pre-defining part of their arguments.</p>\n<p>Let's say we have a function that takes two numeric arguments and sums them together:</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b\n\n<span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token number\">3</span>\n</code></pre>\n<p>Now lets say we want to create a new version of this fuction where the argument <code>a</code> is a fixed value, say <code>5</code> , and we only need to input the argument <code>b</code>.</p>\n<p>The <code>functools</code> module provides an easy way to do this:</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> functools <span class=\"token keyword\">import</span> partial\n\nsum_five <span class=\"token operator\">=</span> partial<span class=\"token punctuation\">(</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\nsum_five<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Sums 2 + 5</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token number\">7</span>\n</code></pre>\n<p>The function <code>partial</code> takes a function as its first argument, and passes the rest of its arguments to that function. It returns a new function with a lower number of inputs. To learn how it does this, we can actually implement <code>partial</code> ourselves using decorators! We also need to learn about the special <code>*args</code> and <code>**kwargs</code> parameters.</p>\n<p>Let's start by implementing the sample above from scratch:</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">input_five</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">inner</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> func<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> inner\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b\n\nsum_five <span class=\"token operator\">=</span> input_five<span class=\"token punctuation\">(</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">)</span>\nsum_five<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token number\">9</span>\n</code></pre>\n<p>As you can see, decorators can be used to create partial functions!\nOf course, we could have used the decorator syntax <code>@input_five</code>, but I wanted to drive home the point that <code>sum_five</code> is a new function that takes less arguments than <code>sum</code>.</p>\n<h2 id=\"variable-arguments\">Variable arguments<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#variable-arguments\"></a></h2>\n<p>The only issue with the implementation above is that sometimes you don't know how many arguments the input function will have. Say we instead passed a function that sums three numbers the function <code>input_five</code> above, in this case it will fail, because <code>func</code> will expect three arguments instead of two.</p>\n<p>To solve this we can use the special parameter <code>*args</code>. <code>*args</code> is a function parameter that catches any arbitrary number of <strong>un-named</strong> input parameters as a list. Note that <code>args</code> is just a variable name (by convention we use the name <code>args</code> or <code>argv</code>), and <code>*</code> is the important part of this parameter. It is the operator <code>*</code> that denotes packing the input arguments into an iterable and assigning them to the variable that follows it.</p>\n<p>A simple function using <code>*args</code>:</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">print_all_arguments</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">for</span> arg <span class=\"token keyword\">in</span> args<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span>\n\nprint_all_arguments<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token number\">1</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token number\">2</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token number\">3</span>\n</code></pre>\n<p>From this, you can proably get an idea of how this is useful for building decorators that can be applied across functions with varying number of arguments.\nHere is the same partial function decorator using <code>*args</code>:</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">input_five</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">inner</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> func<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> inner\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b <span class=\"token operator\">+</span> c <span class=\"token operator\">+</span>d\n\nsum_five <span class=\"token operator\">=</span> input_five<span class=\"token punctuation\">(</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">)</span>\nsum_five<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token number\">116</span>\n</code></pre>\n<p>To wrap things up, let's learn about **kwargs:</p>\n<p><code>**kwargs</code> is similar to <code>*args</code>, but catches <strong>named</strong> input parameters into a dictionary. Just as in <code>*args</code>, the important part is the operator <code>**</code> which denotes packing name-value pairs into a dictonary and assigning them to a variable named <code>kwargs</code>. The list of arguments can then be accessed through the dictionary's <code>.items()</code> method.</p>\n<p>An example:</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">print_all_arguments</span><span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">for</span> k<span class=\"token punctuation\">,</span> v <span class=\"token keyword\">in</span> kwargs<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"Argument </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>k<span class=\"token punctuation\">}</span></span><span class=\"token string\"> has the value </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>v<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n\nprint_all_arguments<span class=\"token punctuation\">(</span>a<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> c<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> Argument a has the value <span class=\"token number\">1</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> Argument b has the value <span class=\"token number\">2</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> Argument c has the value <span class=\"token number\">3</span>\n</code></pre>\n<p>I leave it as an exercise to think how you can use <code>**kwargs</code> to build a decorator that can be applied to functions with varying number of named arguments.</p>","noteIndex":{"id":"i3e9kusp519n36iz1ioi387","title":"Ricardo's Notes","desc":"","updated":1660963919727,"created":1647055090448,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault","remote":{"type":"git","url":"git@github.com:ravila4/knowledgebase.git"}},"contentHash":"9cb227c82d046533deea61e24c8a1c1e","links":[],"anchors":{"welcome-to-my-personal-knowledge-base":{"type":"header","text":"Welcome to my Personal Knowledge Base!","value":"welcome-to-my-personal-knowledge-base","line":8,"column":0,"depth":2},"my-links":{"type":"header","text":"My Links","value":"my-links","line":18,"column":0,"depth":2}},"children":["lf1bfgnfsc4s7uh9qsnefdw","qz307gmzctlyybze4spt8ug","jgwsrsqomd2kd3cj73wg804","e0dxh083vpjhkdjw955e2xv","9y8uvew2sqdfv2ftqyolhfg","9m1s0nes0vm0a7mlbgw5hv7","pju469ro805gknxx6p4lvar","jro9xnfg791cmppo1p7oc90","7bg28rkj42r5n52oxwezco3","77irrssbs1ld66im3uhw4yx","mnoouhphnmr5mdj6is5oaz6","bfuvlavhie001y6cersdn98","lkcpotdu9x59v4mh3u6z077"],"parent":null,"data":{},"body":"\n## Welcome to my Personal Knowledge Base!\n\n![](/assets/images/profile.jpg)\n\nI am a bioinformatics programmer, currently working at the Scripps Research Institute.\n\nI enjoy learning about technology, science, and art. 💻 🧬 🎨\n\nThis is my attempt at organizing and offloading knowledge from topics that I come across often, but not necessarily use on a daily basis, or things that I am in the process of learning.\n\n## My Links\n\n[GitHub](https://github.com/ravila4)\n\n[LinkedIn](https://linkedin.com/in/ravila4)"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault","remote":{"type":"git","url":"git@github.com:ravila4/knowledgebase.git"}}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false,"dendronVersion":"0.108.0"},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Home","description":"My Personal Knowledge Base","author":"Ricardo Avila"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","theme":"custom","siteUrl":"https://ravila4.github.io/","assetsPrefix":"/knowledgebase","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}